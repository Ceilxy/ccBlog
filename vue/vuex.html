<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vuex学习 | CC Blog</title>
    <meta name="description" content="Vuepress blog">
    
    
    <link rel="preload" href="/ccBlog/assets/css/0.styles.da4caf5f.css" as="style"><link rel="preload" href="/ccBlog/assets/js/app.c373e795.js" as="script"><link rel="preload" href="/ccBlog/assets/js/2.e9d55393.js" as="script"><link rel="preload" href="/ccBlog/assets/js/12.2a1e3cb9.js" as="script"><link rel="prefetch" href="/ccBlog/assets/js/10.2b995d2d.js"><link rel="prefetch" href="/ccBlog/assets/js/11.eca1be88.js"><link rel="prefetch" href="/ccBlog/assets/js/13.38339d2a.js"><link rel="prefetch" href="/ccBlog/assets/js/3.473f447a.js"><link rel="prefetch" href="/ccBlog/assets/js/4.6b1b1ab7.js"><link rel="prefetch" href="/ccBlog/assets/js/5.4bcda2ca.js"><link rel="prefetch" href="/ccBlog/assets/js/6.71562cbc.js"><link rel="prefetch" href="/ccBlog/assets/js/7.b0600da0.js"><link rel="prefetch" href="/ccBlog/assets/js/8.d7ba6dcb.js"><link rel="prefetch" href="/ccBlog/assets/js/9.7f185642.js">
    <link rel="stylesheet" href="/ccBlog/assets/css/0.styles.da4caf5f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ccBlog/" class="home-link router-link-active"><!----> <span class="site-name">CC Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ccBlog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/ccBlog/vue/vuex.html" class="nav-link router-link-exact-active router-link-active">Vue</a></div><div class="nav-item"><a href="/ccBlog/js/js-note.html" class="nav-link">JS</a></div><div class="nav-item"><a href="/ccBlog/about/" class="nav-link">About</a></div> <a href="https://github.com/Ceilxy/ccBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ccBlog/" class="nav-link">Home</a></div><div class="nav-item"><a href="/ccBlog/vue/vuex.html" class="nav-link router-link-exact-active router-link-active">Vue</a></div><div class="nav-item"><a href="/ccBlog/js/js-note.html" class="nav-link">JS</a></div><div class="nav-item"><a href="/ccBlog/about/" class="nav-link">About</a></div> <a href="https://github.com/Ceilxy/ccBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/ccBlog/vue/vue-note.html" class="sidebar-link">Vue基础语法(待补全)</a></li><li><a href="/ccBlog/vue/vuex.html" class="active sidebar-link">Vuex学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#简单原理" class="sidebar-link">简单原理</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#为什么要状态管理" class="sidebar-link">为什么要状态管理</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#store-（仓库）" class="sidebar-link">Store （仓库）</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#核心概念" class="sidebar-link">核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#_1-state" class="sidebar-link">1. state</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#_2-getters" class="sidebar-link">2. getters</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#_3-mutation" class="sidebar-link">3. mutation</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#_4-action" class="sidebar-link">4. action</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#_5-module" class="sidebar-link">5. module</a></li></ul></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#命名空间" class="sidebar-link">命名空间</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#vuex帮手-map" class="sidebar-link">Vuex帮手 map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#mapstate" class="sidebar-link">mapState()</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#mapgetters" class="sidebar-link">mapGetters()</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#mapmutations" class="sidebar-link">mapMutations()</a></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#mapactions" class="sidebar-link">mapActions()</a></li></ul></li><li class="sidebar-sub-header"><a href="/ccBlog/vue/vuex.html#在项目中使用vuex来管理状态" class="sidebar-link">在项目中使用vuex来管理状态</a></li></ul></li><li><a href="/ccBlog/vue/mockJS.html" class="sidebar-link">mock.js文档（待补全）</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuex文档笔记"><a href="#vuex文档笔记" class="header-anchor">#</a> Vuex文档笔记</h1> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <p>Vuex是用于vue应用程序开发的<strong>状态管理模式</strong>。
它采用了<strong>集中式储存</strong>统一管理状态，从而使不同组件共享状态。</p> <h2 id="简单原理"><a href="#简单原理" class="header-anchor">#</a> 简单原理</h2> <p>Vuex实现了<strong>单向数据流</strong>，用<strong>state存放数据</strong>，通过<strong>Mutation获取或修改数据</strong>。然后通过<strong>Action进行所有异步操作</strong>（如调用后端接口异步获取更新数据或进行批量同步操作），Action通过<strong>提交mutation来修改数据</strong>。最后，根据State的变化，渲染到视图上。</p> <h2 id="为什么要状态管理"><a href="#为什么要状态管理" class="header-anchor">#</a> 为什么要状态管理</h2> <p>在简单的Vue项目中，我们一般通过<strong>组件传参</strong>的方式来同步或更改数据，但是一旦项目变得复杂，多个组件都需要获取和更改数据时，管理和维护数据是一个很困难的事。所以Vue为需要频繁使用的数据提供了<strong>统一管理的工具--VueX</strong>。 使用vuex可以<strong>集中式储存</strong>管理所有组件的状态，即<strong>不同组件之间可以数据共享，获取数据或者触发行为</strong>。我们只需要把值定义在Vuex当中，就可以在整个项目的组件中使用，这样可以让项目的更加清晰易维护。</p> <h2 id="store-（仓库）"><a href="#store-（仓库）" class="header-anchor">#</a> Store （仓库）</h2> <p>Vuex 的核心就是 store。“store”就是一个<strong>存放状态（state）的仓库</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Vuex的状态储存是<strong>响应式</strong>的。当Vue组件从store中读取状态时，若store中的状态发生了变化，组件也会更新。</li> <li>我们<strong>不能直接改变</strong>store中的state，需要<strong>通过提交mutation</strong>来改变state。</li></ul></div> <p><span id="example1"></span> <strong>如果想要全局使用Store实例，需要在根组件中声明</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js文件</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> moduleA <span class="token keyword">from</span> <span class="token string">'./modules/moduleA'</span>
<span class="token keyword">import</span> moduleB <span class="token keyword">from</span> <span class="token string">'./modules/moduleB'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 实例化Vuex</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">{</span>
        moduleA<span class="token punctuation">,</span>
        moduleB
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    getters
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 暴露</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><h2 id="核心概念"><a href="#核心概念" class="header-anchor">#</a> 核心概念</h2> <h3 id="_1-state"><a href="#_1-state" class="header-anchor">#</a> 1. state</h3> <p><span id="example2"></span>
state是页面状态管理的容器对象，集中储存了组件中data对象的零散数据。</p> <p><strong>声明State的方法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    todos<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'写Blog'</span><span class="token punctuation">,</span> isDone<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'做demo'</span><span class="token punctuation">,</span> isDone<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'算法学习'</span><span class="token punctuation">,</span> isDone<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>由于Vuex的状态储存是响应式的，从store实例中读取状态的方法就是在计算属性中返回某个状态，</strong> 如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在组件中展示state</span>
<span class="token comment">// 每当store里的count变化的时候就会重新计算，刷新页面</span>
computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">count</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>如果在根实例中注册了store选项，可以直接通过自组件访问</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-getters"><a href="#_2-getters" class="header-anchor">#</a> 2. getters</h3> <p>getters就像<strong>store的计算属性</strong>，当我们需要对state里的数据做处理时特别有用。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>它的返回值会根据依赖值进行缓存，只要它的依赖值变化了，它就会被更新计算。</p></div> <p>他也是<strong>state对象的读取方法</strong>，组件通过函数返回值来读取全局state对象。getter在通过function访问state时，每次都会去调用，但不会缓存结果</p> <div class="language-js extra-class"><pre class="language-js"><code>getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Getter 接受 state 作为其第一个参数</span>
    <span class="token comment">// 对数据做过滤处理,但不改变数据的值！！！</span>
    <span class="token function-variable function">DoneTodos</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>isDone<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>getters还接受其他 getters 作为第二个参数</strong>，如不需要用其他 getters，第二个参数可以省略，如</p> <div class="language-js extra-class"><pre class="language-js"><code>getters<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// Getter 还也可以接收 getters 作为第二个参数</span>
  <span class="token comment">// 读取其他getter里函数来做进一步处理</span>
  <span class="token function-variable function">DoneTodosCount</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> getters<span class="token punctuation">.</span>todolist<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Getter还会将store.getter对象暴露出去，可以以属性形式访问</strong>，如</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>todolist<span class="token punctuation">)</span>
</code></pre></div><p><strong>getter还可以返回一个函数来实现传参，在对数组进行查询的时候特别有效</strong>，如</p> <div class="language-js extra-class"><pre class="language-js"><code>getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getTodoById</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> todo<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>在组件中调用的方法</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getTodolist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>todolist
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 组件中获取值</span>
methods<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span><span class="token function">getTodoById</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

computed<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">findTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span><span class="token function">getTodoById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; { id: 2, text: '...', done: false }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-mutation"><a href="#_3-mutation" class="header-anchor">#</a> 3. mutation</h3> <p>Mutation是store中<strong>改变状态的执行者</strong>，他可以通过提交mutation来更改状态。每个mutation会有<strong>一个字符串的事件类型（type）和一个回调函数（handler），回调函数就是我们实际更改状态的地方。</strong> <span id="example3"></span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 事件类型 type 为 increment</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 变更状态</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>然后通过store.commit来触发方法</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>还可以传入额外的参数</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code>mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>todolist<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleDelete</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>todolist<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>todolist<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>isDone <span class="token operator">=</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>todolist<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>isDone
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用方法 (actions中)</span>
store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'handleAdd'</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
</code></pre></div><p><strong>如果需要修改规则，那就要遵循Vue的规则</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 添加</span>
mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">addAge</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 删除</span>
Vue<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>需要注意的是Mutation<strong>必须是同步的函数</strong>，因为我们需要用mutation明确的来追踪到状态的变化，如果使用异步函数，则改变了初衷。</p></div> <p><strong>还可以使用常量来替代mutation事件的名字</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// mutation-types.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SOME_MUTATION</span> <span class="token operator">=</span> <span class="token string">'SOME_MUTATION'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// store.js</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SOME_MUTATION</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./mutation-types'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 ES2015 风格的计算属性命名功能来使用一个常量作为函数名</span>
    <span class="token punctuation">[</span><span class="token constant">SOME_MUTATION</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// mutate state</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-action"><a href="#_4-action" class="header-anchor">#</a> 4. action</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>Action不能直接更改状态，只能提交mutation</li> <li>可以进行异步操作和批量同步操作</li></ul></div> <p>Action函数的第一个参数是<strong>context，它与store有相同的方法和属性，但他们并不是同一个实例</strong>。在action中通过context.commit来提交mutation，或者通过context.state和context.getters来获取state和getters。为了代码简化，也可以<strong>使用参数解构{commit}来直接展开</strong>，如：
<span id="example4"></span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    todos<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'handleAdd'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 解构函数 {commit}</span>
    <span class="token function">handleDelete</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'handleDelete'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'handleChange'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>在组件中分发action</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'handleAdd'</span><span class="token punctuation">,</span> newTodo<span class="token punctuation">)</span>
</code></pre></div><p><strong>组合Action</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如何才能知道 action 什么时候结束呢？如何才能组合多个 action，以处理更加复杂的异步流程？
store.dispatch 可以处理被触发的 action 的处理函数返回的 Promise，并且 store.dispatch 仍旧返回 Promise：</p></div> <div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">actionA</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'someMutation'</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'actionA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>还可以利用异步函数async/await来组合action</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code>actions<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">actionA</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'gotData'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>一个 store.dispatch 在不同模块中可以触发多个 action 函数。在这种情况下，只有当所有触发函数完成后，返回的 Promise 才会执行。</strong></p> <h3 id="_5-module"><a href="#_5-module" class="header-anchor">#</a> 5. module</h3> <p>当Vuex使用单一状态的时候，项目的所有状态都会集中到一个对象中。但是当项目变庞大时，store对象会变得很多，且很难管理。所以Vue允许我们将store分割成各个对象，就比如<strong>store（老板)<strong>把任务分给各个</strong>模块（module)</strong>，让模块来充当部门管理员，如果有什么事情需要处理,直接联系模块，每个模块里都有自己的state，mutation，action，getter。这样大大提高了代码的可维护性和效率。</p> <p><strong>首先我们需要在每个模块文件中暴露</strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// moduleA.js</span>
<span class="token keyword">const</span> stete <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  actions
<span class="token punctuation">}</span>
</code></pre></div><p><strong>然后在index.js文件中导入module</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> moduleA <span class="token keyword">from</span> <span class="token string">'./module/moduleA'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> moduleB <span class="token keyword">from</span> <span class="token string">'./module/moduleB'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">{</span>
        moduleA<span class="token punctuation">,</span> 
        moduleB
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>在组件中引用</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>moduleA<span class="token punctuation">.</span>name
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="命名空间"><a href="#命名空间" class="header-anchor">#</a> 命名空间</h2> <p>模块内部的action，mutation和getter默认是注册在全局空间的，如果只想让他们在某一模块中生效，则要添加namespaced: true。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// moduleA.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>声明之后，如果想要在组件中访问他需要带上路径，如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapActions<span class="token punctuation">,</span> mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'moduleA/detail'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      call<span class="token operator">:</span> <span class="token string">'moduleA/callAction'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vuex帮手-map"><a href="#vuex帮手-map" class="header-anchor">#</a> Vuex帮手 map</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>...mapState()   ...mapGetters()   ...mapActions()</strong></p></div> <p><span id="example5"></span></p> <h3 id="mapstate"><a href="#mapstate" class="header-anchor">#</a> mapState()</h3> <br>
当组件中要一次传入多个状态时，用mapState()可以节省很多时间。
<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

computed<span class="token operator">:</span> <span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 箭头函数可使代码更简练</span>
    <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
    <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>b<span class="token punctuation">,</span>
    <span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>c
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 之后可以用state.a直接调用</span>
<span class="token comment">// 或者传入字符串数组</span>
computed<span class="token operator">:</span> <span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// 映射 this.a 为 store.state.a</span>
  <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token string">'c'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 使用对象展开运算符</span>
<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><span id="example7"></span></p> <h3 id="mapgetters"><a href="#mapgetters" class="header-anchor">#</a> mapGetters()</h3> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'doneTodosCount'</span><span class="token punctuation">,</span>
      <span class="token string">'anotherGetter'</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// this.doneCount 映射为 this.$store.getters.doneTodosCount</span>
<span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  doneCount<span class="token operator">:</span> <span class="token string">'doneTodosCount'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><span id="example6"></span></p> <h3 id="mapmutations"><a href="#mapmutations" class="header-anchor">#</a> mapMutations()</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token comment">// 将 `this.increment()` 映射为 </span>
      <span class="token comment">// `this.$store.commit('increment')`</span>
      <span class="token string">'increment'</span><span class="token punctuation">,</span> 
      <span class="token comment">// `mapMutations` 也支持载荷：</span>
      <span class="token comment">// 将 `this.incrementBy(amount)` 映射为 </span>
      <span class="token comment">// `this.$store.commit('incrementBy', amount)`</span>
      <span class="token string">'incrementBy'</span> 
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 将 `this.add()` 映射为 </span>
      <span class="token comment">// `this.$store.commit('increment')`</span>
      add<span class="token operator">:</span> <span class="token string">'increment'</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><span id="example8"></span></p> <h3 id="mapactions"><a href="#mapactions" class="header-anchor">#</a> mapActions()</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token comment">// 将 `this.increment()` 映射为 </span>
      <span class="token comment">// `this.$store. dispatch('increment')`</span>
      <span class="token string">'increment'</span><span class="token punctuation">,</span> 
      <span class="token comment">// `mapActions` 也支持载荷：</span>
      <span class="token comment">// 将 `this.incrementBy(amount)` 映射为 </span>
      <span class="token comment">// `this.$store. dispatch('incrementBy', amount)`</span>
      <span class="token string">'incrementBy'</span> 
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 将 `this.add()` 映射为 </span>
      <span class="token comment">// `this.$store. dispatch('increment')`</span>
      add<span class="token operator">:</span> <span class="token string">'increment'</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="在项目中使用vuex来管理状态"><a href="#在项目中使用vuex来管理状态" class="header-anchor">#</a> 在项目中使用vuex来管理状态</h2> <ol><li>安装：<code>npm install vuex --save</code></li> <li>在src目录下新建一个名为store的文件夹</li> <li>在store文件里新建一个index.js</li> <li>在store文件里新建一个modules文件夹来储存状态</li></ol> <div class="language- extra-class"><pre class="language-text"><code>目录机构如下：
├── store                   // 仓库文件
│   ├── index.js            // store实例化
│   ├── getters.js          // getter文件
│   └── modules             // 模块储存文件
│       └── todolist.js     //模块                 
</code></pre></div><ol start="5"><li><p>在index.js文件中引入vue和vuex, 实例化store来统一管理状态
<a href="#example1">详细代码</a></p></li> <li><p>在state中定义数据(初始化数据)
<a href="#example2">详细代码</a></p></li> <li><p>在mutations中定义方法
<a href="#example3">详细代码</a></p></li> <li><p>在actions中提交方法
<a href="#example4">详细代码</a></p></li> <li><p>在组件中使用vuex
<br> <a href="#example5">mapState详细代码</a><br> <a href="#example6">mapMutations详细代码</a><br> <a href="#example7">mapGetters详细代码</a><br> <a href="#example8">mapActions详细代码</a><br></p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;@/vuex/store&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//引入前面建立好的store文件，地址自定</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapMutations<span class="token punctuation">,</span> mapGetters<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span> <span class="token comment">//引入辅助函数</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
           <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//将该组件中需要用的状态添加进来</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 或者使用</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 调用state</span>
        todolist<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>todolist
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用mutations</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">,</span>variable<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用actions</span>
        <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>参考链接：<br> <a href="https://mp.weixin.qq.com/s/XZ3BmZLY4OwwGm2Hbbepbg" target="_blank" rel="noopener noreferrer">Vue 组件间通信六种方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://www.jianshu.com/p/120eaf50331c" target="_blank" rel="noopener noreferrer">Vuex白话教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vuex官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/19/2020, 5:48:36 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ccBlog/vue/vue-note.html" class="prev">Vue基础语法(待补全)</a></span> <span class="next"><a href="/ccBlog/vue/mockJS.html">mock.js文档（待补全）</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ccBlog/assets/js/app.c373e795.js" defer></script><script src="/ccBlog/assets/js/2.e9d55393.js" defer></script><script src="/ccBlog/assets/js/12.2a1e3cb9.js" defer></script>
  </body>
</html>
